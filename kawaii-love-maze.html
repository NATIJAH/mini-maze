<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>üíó Kawaii Love Maze üíó</title>
<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  margin: 0;
  background: linear-gradient(135deg, #ffe6f2 0%, #ffd4e8 100%);
  font-family: 'Comic Sans MS', 'Arial', sans-serif;
  text-align: center;
  overflow: hidden;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  position: fixed;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
}

.container {
  position: relative;
  z-index: 10;
  max-height: 100vh;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 10px;
}

#start, #end {
  animation: fadeIn 0.6s ease-in;
  padding: 10px;
}

@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}

h1 {
  color: #ff4fa3;
  font-size: 48px;
  margin-bottom: 20px;
  text-shadow: 2px 2px 4px rgba(255, 105, 180, 0.3);
  animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

canvas {
  background: linear-gradient(135deg, #f2fbff 0%, #e8f7ff 100%);
  border-radius: 25px;
  box-shadow: 0 8px 32px rgba(255, 182, 217, 0.5);
  display: none;
  margin: 10px auto;
  border: 4px solid #ffb6d9;
  transition: transform 0.2s;
}

canvas:hover {
  transform: scale(1.02);
}

button {
  background: linear-gradient(135deg, #ff9acb 0%, #ff7ab8 100%);
  border: none;
  border-radius: 25px;
  padding: 18px 40px;
  font-size: 22px;
  color: white;
  cursor: pointer;
  box-shadow: 0 4px 15px rgba(255, 154, 203, 0.4);
  transition: all 0.3s;
  font-weight: bold;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
}

button:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(255, 154, 203, 0.6);
  background: linear-gradient(135deg, #ff7ab8 0%, #ff9acb 100%);
}

button:active {
  transform: translateY(0);
  box-shadow: 0 2px 10px rgba(255, 154, 203, 0.4);
}

.controls {
  margin-top: 10px;
  display: none;
}

.controls button {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  font-size: 24px;
  margin: 5px;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.controls .row {
  display: flex;
  justify-content: center;
  gap: 5px;
}

p {
  color: #ff4fa3;
  font-size: 20px;
  line-height: 1.6;
  margin: 15px 0;
}

.heart {
  position: fixed;
  animation: float 6s linear infinite;
  pointer-events: none;
  font-size: 24px;
  z-index: 1;
}

@keyframes float {
  from {
    transform: translateY(0) rotate(0deg);
    opacity: 1;
  }
  to {
    transform: translateY(-100vh) rotate(360deg);
    opacity: 0;
  }
}

img {
  border-radius: 20px;
  margin: 20px 0;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  max-width: 200px;
}

.level-indicator {
  background: linear-gradient(135deg, #fff 0%, #ffe6f2 100%);
  border-radius: 20px;
  padding: 12px 24px;
  margin: 15px auto;
  display: none;
  width: fit-content;
  box-shadow: 0 4px 15px rgba(255, 182, 217, 0.3);
  font-size: 18px;
  font-weight: bold;
  color: #ff4fa3;
}

.message-box {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0);
  background: white;
  padding: 40px;
  border-radius: 30px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  z-index: 1000;
  transition: transform 0.3s;
  min-width: 300px;
}

.message-box.show {
  transform: translate(-50%, -50%) scale(1);
}

.message-box h2 {
  color: #ff4fa3;
  margin-bottom: 15px;
  font-size: 32px;
}

.message-box p {
  margin-bottom: 20px;
  font-size: 18px;
}

.overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 999;
  display: none;
}

.overlay.show {
  display: block;
}

.end-message {
  font-size: 24px;
  max-width: 500px;
  margin: 0 auto;
  padding: 20px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 20px;
  box-shadow: 0 4px 20px rgba(255, 182, 217, 0.4);
}

.keyboard-hint {
  margin-top: 15px;
  font-size: 14px;
  color: #ff7ab8;
  opacity: 0.8;
}

@media (max-width: 600px) {
  canvas {
    max-width: 90vw;
    max-height: 50vh;
    width: auto;
    height: auto;
  }
  
  h1 {
    font-size: 32px;
  }
  
  .controls button {
    width: 55px;
    height: 55px;
    font-size: 22px;
  }
  
  .container {
    padding: 5px;
  }
}
</style>
</head>
<body>
<div class="overlay" id="overlay"></div>
<div class="message-box" id="messageBox">
  <h2 id="msgTitle"></h2>
  <p id="msgText"></p>
  <button onclick="closeMessage()">Continue üíï</button>
</div>

<div class="container">
  <div id="start">
    <h1>üíó For Ecamm üíó</h1>
    <div style="font-size: 80px; margin: 20px 0;">üê∞</div>
    <p>Guide the bunny to the ‚≠ê<br>Made with love üòΩ</p>
    <button onclick="start()">Play üê∞</button>
    <p class="keyboard-hint">üí° You can use arrow keys on keyboard!</p>
  </div>

  <div id="gameArea" style="display:none">
    <div class="level-indicator" id="levelIndicator">Level 1 of 3</div>
    <canvas id="game" width="400" height="400"></canvas>
    <div class="controls">
      <div class="row">
        <button onclick="move(0,-1)" id="btnUp">‚¨ÜÔ∏è</button>
      </div>
      <div class="row">
        <button onclick="move(-1,0)" id="btnLeft">‚¨ÖÔ∏è</button>
        <button onclick="move(1,0)" id="btnRight">‚û°Ô∏è</button>
      </div>
      <div class="row">
        <button onclick="move(0,1)" id="btnDown">‚¨áÔ∏è</button>
      </div>
    </div>
  </div>

  <div id="end" style="display:none">
    <h1>üíñ Ecamm üíñ</h1>
    <div class="end-message">
      <p style="font-size:28px; margin-bottom:20px">
        You did it baby! üòΩ
      </p>
      <p style="font-size:22px">
        Don't stress out,<br>
        you're amazing and<br>
        I love you forever üíï‚ú®
      </p>
    </div>
    <button onclick="location.reload()" style="margin-top:25px">Play Again üîÑ</button>
  </div>
</div>

<audio id="music" loop>
  <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_4a74a57b62.mp3">
</audio>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const tile = 40;
let level = 0;
let player = {x: 0, y: 0};
let animationFrame = 0;

const messages = [
  "You can do it baby üíï",
  "Come on baby, fighting!! üíó",
  "Yeah you did it!!! üòΩüíñ"
];

const levelTitles = [
  "Level 1: Challenge Mode üíó",
  "Level 2: Hard Mode üíï",
  "Level 3: Expert Mode üíñ"
];

const levels = [
  // LEVEL 1 - Medium difficulty
  [
    [0,0,0,1,0,0,0,1,0,0],
    [1,1,0,1,0,1,0,1,0,1],
    [0,0,0,1,0,1,0,0,0,1],
    [0,1,1,1,0,1,1,1,1,1],
    [0,0,0,0,0,0,0,0,0,0],
    [1,1,1,1,0,1,1,1,1,0],
    [0,0,0,1,0,0,0,0,1,0],
    [0,1,0,1,1,1,1,0,1,0],
    [0,1,0,0,0,0,0,0,0,0],
    [0,1,1,1,1,1,1,1,1,2]
  ],
  // LEVEL 2 - Hard difficulty
  [
    [0,1,0,0,0,1,0,0,0,0],
    [0,1,0,1,0,1,0,1,0,1],
    [0,0,0,1,0,0,0,1,0,1],
    [1,1,1,1,0,1,1,1,0,1],
    [0,0,0,0,0,1,0,0,0,0],
    [0,1,1,1,1,1,0,1,1,0],
    [0,0,0,0,0,0,0,1,0,0],
    [1,1,1,1,1,1,0,1,0,1],
    [0,0,0,0,0,0,0,0,0,1],
    [0,1,1,1,1,1,1,1,0,2]
  ],
  // LEVEL 3 - Expert difficulty (COMPLETELY FIXED - VERIFIED PATH)
  [
    [0,0,0,1,0,0,0,0,0,0],
    [1,1,0,1,0,1,1,1,1,0],
    [0,0,0,1,0,0,0,0,1,0],
    [0,1,1,1,1,1,1,0,1,0],
    [0,0,0,0,0,0,0,0,1,0],
    [1,1,1,1,1,1,1,1,1,0],
    [0,0,0,0,0,0,0,0,0,0],
    [0,1,1,1,1,1,1,1,1,1],
    [0,0,0,0,0,0,0,0,0,0],
    [1,1,1,1,1,1,1,1,0,2]
  ]
];

// Using emoji instead of image for better compatibility
const bunnyEmoji = "üê∞";

// Keyboard controls
document.addEventListener('keydown', (e) => {
  if (canvas.style.display !== 'block') return;
  
  switch(e.key) {
    case 'ArrowUp':
    case 'w':
    case 'W':
      e.preventDefault();
      move(0, -1);
      break;
    case 'ArrowDown':
    case 's':
    case 'S':
      e.preventDefault();
      move(0, 1);
      break;
    case 'ArrowLeft':
    case 'a':
    case 'A':
      e.preventDefault();
      move(-1, 0);
      break;
    case 'ArrowRight':
    case 'd':
    case 'D':
      e.preventDefault();
      move(1, 0);
      break;
  }
});

function showMessage(title, text, callback) {
  const msgBox = document.getElementById('messageBox');
  const overlay = document.getElementById('overlay');
  
  document.getElementById('msgTitle').textContent = title;
  document.getElementById('msgText').textContent = text;
  
  overlay.classList.add('show');
  msgBox.classList.add('show');
  
  window.currentMessageCallback = callback;
}

function closeMessage() {
  const msgBox = document.getElementById('messageBox');
  const overlay = document.getElementById('overlay');
  
  overlay.classList.remove('show');
  msgBox.classList.remove('show');
  
  if (window.currentMessageCallback) {
    window.currentMessageCallback();
    window.currentMessageCallback = null;
  }
}

function start() {
  document.getElementById("start").style.display = "none";
  document.getElementById("gameArea").style.display = "block";
  document.querySelector(".level-indicator").style.display = "block";
  canvas.style.display = "block";
  document.querySelector(".controls").style.display = "block";
  
  const music = document.getElementById("music");
  music.play().catch(() => {
    // Auto-play might be blocked, that's okay
  });
  
  hearts();
  updateLevelIndicator();
  showMessage(levelTitles[0], "Let's go baby! üíó", () => {
    draw();
  });
}

function updateLevelIndicator() {
  document.getElementById('levelIndicator').textContent = `Level ${level + 1} of 3`;
}

function draw() {
  ctx.clearRect(0, 0, 400, 400);
  const maze = levels[level];
  
  // Draw maze
  for (let y = 0; y < 10; y++) {
    for (let x = 0; x < 10; x++) {
      if (maze[y][x] == 1) {
        // Wall with gradient
        const gradient = ctx.createLinearGradient(x*tile, y*tile, x*tile+tile, y*tile+tile);
        gradient.addColorStop(0, '#9ddcff');
        gradient.addColorStop(1, '#7cc8ff');
        ctx.fillStyle = gradient;
        ctx.fillRect(x*tile, y*tile, tile, tile);
        
        // Wall border
        ctx.strokeStyle = '#6bb8ef';
        ctx.lineWidth = 2;
        ctx.strokeRect(x*tile, y*tile, tile, tile);
      }
      
      if (maze[y][x] == 2) {
        // Animated star
        ctx.save();
        ctx.translate(x*tile + 20, y*tile + 20);
        ctx.rotate((animationFrame * 0.05) % (Math.PI * 2));
        ctx.font = "32px Arial";
        ctx.fillText("‚≠ê", -16, 10);
        ctx.restore();
      }
    }
  }
  
  // Draw path tiles with slight highlight
  ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
  for (let y = 0; y < 10; y++) {
    for (let x = 0; x < 10; x++) {
      if (maze[y][x] == 0 || maze[y][x] == 2) {
        ctx.fillRect(x*tile + 2, y*tile + 2, tile - 4, tile - 4);
      }
    }
  }
  
  // Draw bunny emoji with bounce animation
  const bounce = Math.sin(animationFrame * 0.1) * 2;
  ctx.font = "32px Arial";
  ctx.fillText(bunnyEmoji, player.x*tile + 4, player.y*tile + 28 + bounce);
  
  animationFrame++;
  requestAnimationFrame(draw);
}

function move(dx, dy) {
  const maze = levels[level];
  const nx = player.x + dx;
  const ny = player.y + dy;
  
  if (nx >= 0 && ny >= 0 && nx < 10 && ny < 10 && maze[ny][nx] != 1) {
    player.x = nx;
    player.y = ny;
    
    // Victory check
    if (maze[player.y][player.x] == 2) {
      showMessage("Amazing! üéâ", messages[level], () => {
        level++;
        player = {x: 0, y: 0};
        
        if (level >= 3) {
          canvas.style.display = "none";
          document.querySelector(".controls").style.display = "none";
          document.querySelector(".level-indicator").style.display = "none";
          document.getElementById("gameArea").style.display = "none";
          document.getElementById("end").style.display = "block";
          return;
        }
        
        updateLevelIndicator();
        showMessage(levelTitles[level], "Keep going! üòΩ", () => {});
      });
    }
  }
}

function hearts() {
  setInterval(() => {
    const h = document.createElement("div");
    h.className = "heart";
    const hearts = ['üíó', 'üíï', 'üíñ', 'üíù'];
    h.innerHTML = hearts[Math.floor(Math.random() * hearts.length)];
    h.style.left = Math.random() * 100 + "%";
    h.style.top = "100%";
    h.style.fontSize = (16 + Math.random() * 16) + "px";
    document.body.appendChild(h);
    setTimeout(() => h.remove(), 6000);
  }, 700);
}
</script>
</body>
</html>
